require=function i(u,a,c){function s(t,e){if(!a[t]){if(!u[t]){var r="function"==typeof require&&require;if(!e&&r)return r(t,!0);if(l)return l(t,!0);var o=new Error("Cannot find module '"+t+"'");throw o.code="MODULE_NOT_FOUND",o}var n=a[t]={exports:{}};u[t][0].call(n.exports,function(e){return s(u[t][1][e]||e)},n,n.exports,i,u,a,c)}return a[t].exports}for(var l="function"==typeof require&&require,e=0;e<c.length;e++)s(c[e]);return s}({"G:\\CocosCreator_Project\\tutorial-mind-your-step-3d\\assets\\Scipts\\GameManager.ts":[function(e,x,t){"use strict";!function(){var r,o,n,i,u,a,c,s,l,p,f,y,d,h,_,b,v,m,S,P,g,w,O,T,C,j;function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function N(e,t,r,o){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(o):void 0})}function G(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function M(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function B(e,t){return(B=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function I(r,o,e,t,n){var i={};return Object.keys(t).forEach(function(e){i[e]=t[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=e.slice().reverse().reduce(function(e,t){return t(r,o,e)||e},i),n&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(n):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(r,o,i),i=null),i}x.exports={_dec:void 0,_dec2:void 0,_dec3:void 0,_dec4:void 0,_dec5:void 0,_dec6:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_descriptor4:void 0,_descriptor5:void 0,_temp:void 0,BlockType:void 0,GameState:void 0},function(e,t){for(var r=e.setters,o=0;o<t.length;++o)r[o]&&r[o](t[o]);e.execute()}({setters:[function(e){r=e.PlayerController}],execute:function(){var e,t;cc._RF.push(window.module||{},"326d6DtDjZPxJ4SwTMVuYAe","GameManager"),_=cc,b=_._decorator,v=_.Component,m=_.Prefab,S=_.instantiate,P=_.Node,g=_.LabelComponent,w=_.CCInteger,O=b.ccclass,T=b.property,(e=C||(C={}))[e.BT_NONE=0]="BT_NONE",e[e.BT_STONE=1]="BT_STONE",(t=j||(j={}))[t.GS_INIT=0]="GS_INIT",t[t.GS_PLAYING=1]="GS_PLAYING",t[t.GS_END=2]="GS_END",x.exports.GameManager=(o=O("GameManager"),n=T({type:m}),i=T({type:w}),u=T({type:P}),a=T({type:r}),c=T({type:g}),o((p=I((l=function(e){function u(){var e,t,r;!function(e,t){if(!(e instanceof u))throw new TypeError("Cannot call a class as a function")}(this);for(var o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];return this,N(t=!(r=(e=k(u)).call.apply(e,[this].concat(n)))||"object"!==E(r)&&"function"!=typeof r?M(this):r,"cubePrfb",p,M(t)),N(t,"roadLength",f,M(t)),t._road=[],N(t,"startMenu",y,M(t)),N(t,"playerCtrl",d,M(t)),t._curState=j.GS_INIT,N(t,"stepsLabel",h,M(t)),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&B(e,t)}(u,v),G(u.prototype,[{key:"start",value:function(){this.curState=j.GS_INIT,this.playerCtrl.node.on("JumpEnd",this.onPlayerJumpEnd,this)}},{key:"init",value:function(){this.startMenu.active=!0,this.generateRoad(),this.playerCtrl.setInputActive(!1),this.playerCtrl.node.setPosition(cc.v3()),this.playerCtrl.reset()}},{key:"generateRoad",value:function(){this.node.removeAllChildren(!0),this._road=[],this._road.push(C.BT_STONE);for(var e=1;e<this.roadLength;e++)this._road[e-1]===C.BT_NONE?this._road.push(C.BT_STONE):this._road.push(Math.floor(2*Math.random()));for(var t=0;t<this._road.length;t++){var r=this.spawnBlockByType(this._road[t]);r&&(this.node.addChild(r),r.setPosition(t,-1.5,0))}}},{key:"spawnBlockByType",value:function(e){var t=null;switch(e){case C.BT_STONE:t=S(this.cubePrfb)}return t}},{key:"onStartButtonClicked",value:function(){this.curState=j.GS_PLAYING}},{key:"checkResult",value:function(e){e<=this.roadLength?this._road[e]==C.BT_NONE&&(this.curState=j.GS_INIT):this.curState=j.GS_INIT}},{key:"onPlayerJumpEnd",value:function(e){this.stepsLabel.string=""+e,this.checkResult(e)}},{key:"curState",set:function(e){var t=this;switch(e){case j.GS_INIT:this.init();break;case j.GS_PLAYING:this.startMenu.active=!1,this.stepsLabel.string="0",setTimeout(function(){t.playerCtrl.setInputActive(!0)},.1);break;case j.GS_END:}this._curState=e}}]),u}()).prototype,"cubePrfb",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=I(l.prototype,"roadLength",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),y=I(l.prototype,"startMenu",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=I(l.prototype,"playerCtrl",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=I(l.prototype,"stepsLabel",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),s=l))||s),cc._RF.pop()}},[e("./PlayerController")])}()},{"./PlayerController":"G:\\CocosCreator_Project\\tutorial-mind-your-step-3d\\assets\\Scipts\\PlayerController.ts"}],"G:\\CocosCreator_Project\\tutorial-mind-your-step-3d\\assets\\Scipts\\PlayerController.ts":[function(e,O,t){"use strict";!function(){var i,u,a,c,l,s,p,f,y,d,h,_,b,v;function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}O.exports={_dec:void 0,_dec2:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_temp:void 0},function(e,t){for(var r=e.setters,o=0;o<t.length;++o)r[o]&&r[o](t[o]);e.execute()}({setters:[],execute:function(){var r,o,e,t,n;cc._RF.push(window.module||{},"ddfb1tkyx9BEqyM7xmfE5Db","PlayerController"),s=cc,p=s._decorator,f=s.Component,y=s.vmath,d=s.systemEvent,h=s.SystemEvent,_=s.AnimationComponent,b=p.ccclass,v=p.property,O.exports.PlayerController=(i=b("PlayerController"),u=v({type:_}),i((r=(c=function(e){function s(){var e,t,r,o,n,i;!function(e,t){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}(this);for(var u=arguments.length,a=new Array(u),c=0;c<u;c++)a[c]=arguments[c];return this,t=!(r=(e=P(s)).call.apply(e,[this].concat(a)))||"object"!==m(r)&&"function"!=typeof r?g(this):r,"BodyAnim",n=l,i=g(o=t),n&&Object.defineProperty(o,"BodyAnim",{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0}),t._startJump=!1,t._jumpStep=0,t._curJumpTime=0,t._jumpTime=.1,t._curJumpSpeed=0,t._curPos=cc.v3(),t._deltaPos=cc.v3(0,0,0),t._targetPos=cc.v3(),t._isMoving=!1,t._curMoveIndex=0,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(s,f),S(s.prototype,[{key:"start",value:function(){}},{key:"reset",value:function(){this._curMoveIndex=0}},{key:"setInputActive",value:function(e){e?d.on(h.EventType.MOUSE_UP,this.onMouseUp,this):d.off(h.EventType.MOUSE_UP,this.onMouseUp,this)}},{key:"onMouseUp",value:function(e){0===e.getButton()?this.jumpByStep(1):2===e.getButton()&&this.jumpByStep(2)}},{key:"jumpByStep",value:function(e){this._isMoving||(this._startJump=!0,this._jumpStep=e,this._curJumpTime=0,this._curJumpSpeed=this._jumpStep/this._jumpTime,this.node.getPosition(this._curPos),y.vec3.add(this._targetPos,this._curPos,cc.v3(this._jumpStep,0,0)),this._isMoving=!0,1===e?this.BodyAnim.play("oneStep"):2===e&&this.BodyAnim.play("twoStep"),this._curMoveIndex+=e)}},{key:"onOnceJumpEnd",value:function(){this._isMoving=!1,this.node.emit("JumpEnd",this._curMoveIndex)}},{key:"update",value:function(e){this._startJump&&(this._curJumpTime+=e,this._curJumpTime>this._jumpTime?(this.node.setPosition(this._targetPos),this._startJump=!1,this.onOnceJumpEnd()):(this.node.getPosition(this._curPos),this._deltaPos.x=this._curJumpSpeed*e,y.vec3.add(this._curPos,this._curPos,this._deltaPos),this.node.setPosition(this._curPos)))}}]),s}()).prototype,o="BodyAnim",e=[u],t={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}},n={},Object.keys(t).forEach(function(e){n[e]=t[e]}),n.enumerable=!!n.enumerable,n.configurable=!!n.configurable,("value"in n||n.initializer)&&(n.writable=!0),void 0===(n=e.slice().reverse().reduce(function(e,t){return t(r,o,e)||e},n)).initializer&&(Object.defineProperty(r,o,n),n=null),l=n,a=c))||a),cc._RF.pop()}},[])}()},{}]},{},["G:\\CocosCreator_Project\\tutorial-mind-your-step-3d\\assets\\Scipts\\GameManager.ts","G:\\CocosCreator_Project\\tutorial-mind-your-step-3d\\assets\\Scipts\\PlayerController.ts"]);